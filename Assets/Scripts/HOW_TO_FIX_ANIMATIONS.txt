════════════════════════════════════════════════════════════════════════════════
                       HOW TO FIX ANIMATIONS - COMPLETE GUIDE
════════════════════════════════════════════════════════════════════════════════

Your player is T-posing because the prefab doesn't have a configured Animator.
This is a SIMPLE fix - follow the steps below!

════════════════════════════════════════════════════════════════════════════════
                              OPTION 1: FASTEST FIX
                           (Using Simplified Controller)
════════════════════════════════════════════════════════════════════════════════

This option bypasses the complex PlayableGraph system and uses standard Unity
Animator workflow which is much more reliable.

───────────────────────────────────────────────────────────────────────────────
STEP 1: Create Animator Controller
───────────────────────────────────────────────────────────────────────────────

1. Project window → Right-click /Assets/Scripts folder
2. Create → Animator Controller
3. Name it: "PlayerCinematicController"
4. Double-click to open Animator window

5. Add Parameters (left panel):
   Click "+" button:
   - Float → name: "MoveSpeed"
   - Bool → name: "IsMoving"

6. Create States (right-click empty area):
   - Create State → Empty → name: "Idle"
   - Create State → Empty → name: "Walk"

7. Set Default State:
   - Right-click "Idle" → Set as Layer Default State (turns orange)

8. Add Transitions:
   A) Idle → Walk:
      - Right-click "Idle" → Make Transition → click "Walk" state
      - Select the transition arrow
      - Inspector → UNCHECK "Has Exit Time"
      - Conditions → click "+" → "IsMoving" = true
      
   B) Walk → Idle:
      - Right-click "Walk" → Make Transition → click "Idle"  
      - Select the transition arrow
      - Inspector → UNCHECK "Has Exit Time"
      - Conditions → click "+" → "IsMoving" = false

9. (Optional) Assign Animation Clips:
   - Select "Idle" state
   - Inspector → Motion field → Drag idle animation clip
   - Select "Walk" state
   - Inspector → Motion field → Drag walk animation clip
   
   Good clips to use:
   /Assets/3rdParty/Mobility_Pro/Animation/MOB1_Stand_Relaxed_Idle_v2_IPC
   /Assets/3rdParty/Mobility_Pro/Animation/MOB1_Jog_F_Loop_IPC

10. Save (Ctrl+S)

───────────────────────────────────────────────────────────────────────────────
STEP 2: Setup Player Prefab
───────────────────────────────────────────────────────────────────────────────

1. Navigate to:
   /Assets/3rdParty/Maksim Bugrimov/Sci_Fi_Character_08/Prefabs/

2. Select: Sci_Fi_Character_08_03.prefab

3. Inspector → Click "Open Prefab" button (top right)

4. Make sure ROOT GameObject is selected (Sci_Fi_Character_08_03)

5. Add Animator Component:
   - Inspector → Add Component → type "Animator"
   - Click to add it

6. Configure Animator:
   - Controller: Drag "PlayerCinematicController" from Step 1
   - Avatar: Auto-filled or look for Avatar in /Mesh folder
   - Apply Root Motion: UNCHECK ❌
   - Update Mode: Normal
   - Culling Mode: Always Animate

7. Check Avatar:
   - If Avatar field is empty, you need to configure the model rig
   - See "STEP 3: Configure Model Rig" below

8. Save prefab (close prefab mode or Ctrl+S)

───────────────────────────────────────────────────────────────────────────────
STEP 3: Configure Model Rig (Only if Avatar is missing)
───────────────────────────────────────────────────────────────────────────────

1. Navigate to:
   /Assets/3rdParty/Maksim Bugrimov/Sci_Fi_Character_08/Mesh/

2. Select: Sci_Fi_Character_08.FBX (the model file, not prefab)

3. Inspector → "Rig" tab

4. Animation Type: Select "Humanoid"

5. Avatar Definition: "Create From This Model"

6. Click "Configure..." button

7. You'll see skeleton preview:
   - Green bones = good ✓
   - Red bones = problem ✗
   - If all green, click "Apply" then "Done"

8. Avatar asset now appears under the FBX in Project window

9. Go back to STEP 2 and assign this Avatar to the Animator

───────────────────────────────────────────────────────────────────────────────
STEP 4: Use Simplified Controller in Scene
───────────────────────────────────────────────────────────────────────────────

1. Open scene: /Assets/TPSBR/Scenes/Game.unity

2. Find "SeasonCinematicController " in Hierarchy

3. Option A - Replace Component:
   - Inspector → click ⋮ menu on SeasonCinematicController component
   - Remove Component
   - Add Component → "SimplifiedSeasonCinematicController"

   Option B - Create New GameObject:
   - Hierarchy → Right-click → Create Empty
   - Name it: "CinematicController"
   - Add Component → "SimplifiedSeasonCinematicController"
   - Disable/delete old "SeasonCinematicController "

4. Configure SimplifiedSeasonCinematicController:
   - Player Prefab: Drag Sci_Fi_Character_08_03 prefab
   - Spawn Point: Create empty GameObject at spawn location, assign it
   - Player Follow Cam: Assign your Cinemachine camera
   - Skip Laying Down: CHECK ✓ (for now, to test movement works)
   - Other fields optional

5. Save scene

───────────────────────────────────────────────────────────────────────────────
STEP 5: Test
───────────────────────────────────────────────────────────────────────────────

1. Click Play ▶

2. You should see:
   ✓ Player spawns (not T-posing)
   ✓ Player in idle animation
   ✓ Console: "Cinematic started", "Found Animator", "Camera configured"

3. Move with WASD + mouse:
   ✓ Player walks (animation transitions Idle → Walk)
   ✓ Camera follows player
   ✓ Mouse rotates view

4. If still T-posing:
   → Check console for error messages
   → Make sure Animator has Controller AND Avatar assigned
   → See "Troubleshooting" section below

════════════════════════════════════════════════════════════════════════════════
                         OPTION 2: FIX EXISTING CONTROLLER
                             (Keep PlayableGraph system)
════════════════════════════════════════════════════════════════════════════════

If you want to keep using SeasonCinematicController with PlayableGraph:

1. Do STEP 1, 2, 3 from Option 1 (create Animator Controller and add to prefab)

2. The PlayableGraph will temporarily override the Animator for lying down/wake up

3. Important: PlayableGraph REQUIRES an Animator component to work!

4. The existing SeasonCinematicController should now work once Animator is added

════════════════════════════════════════════════════════════════════════════════
                               TROUBLESHOOTING
════════════════════════════════════════════════════════════════════════════════

───────────────────────────────────────────────────────────────────────────────
PROBLEM: Still T-posing after following all steps
───────────────────────────────────────────────────────────────────────────────

CAUSE: Animator is missing Controller or Avatar

FIX:
1. During Play mode, find spawned player in Hierarchy ("CinematicPlayer")
2. Select it
3. Inspector → find Animator component
4. Check:
   - Controller: Should have "PlayerCinematicController" assigned
   - Avatar: Should have an Avatar assigned (not None)
   - If either is None, the problem is in your prefab setup
5. Exit Play mode
6. Fix the prefab (STEP 2 and 3 above)
7. Test again

───────────────────────────────────────────────────────────────────────────────
PROBLEM: Animations don't play / character frozen
───────────────────────────────────────────────────────────────────────────────

CAUSE: Animator Controller has no animation clips assigned

FIX:
1. Open "PlayerCinematicController" in Animator window
2. Select "Idle" state
3. Inspector → Motion → Drag an idle animation clip
4. Select "Walk" state  
5. Inspector → Motion → Drag a walk animation clip
6. Save
7. Test

If you don't have animation clips:
- Use Mobility_Pro animations (paths in STEP 1.9 above)
- Or import free animations from Unity Asset Store

───────────────────────────────────────────────────────────────────────────────
PROBLEM: "Animator has no Avatar" error in console
───────────────────────────────────────────────────────────────────────────────

CAUSE: Model FBX file isn't configured with a rig

FIX: Follow STEP 3 "Configure Model Rig" above

───────────────────────────────────────────────────────────────────────────────
PROBLEM: Character slides/doesn't match ground
───────────────────────────────────────────────────────────────────────────────

CAUSE: Animation has root motion but "Apply Root Motion" is checked

FIX:
1. Select player prefab
2. Animator component → UNCHECK "Apply Root Motion"
3. Movement is controlled by CharacterController, not animation

───────────────────────────────────────────────────────────────────────────────
PROBLEM: Animations from /Cinematics/ folder don't work
───────────────────────────────────────────────────────────────────────────────

CAUSE: FBX import settings might be wrong

FIX:
For each FBX in /Assets/Cinematics/:
1. Select the FBX file
2. Inspector → "Rig" tab
3. Animation Type: Match your player (Humanoid)
4. If Humanoid:
   - Avatar Definition: "Copy From Other Avatar"
   - Source: Drag player's Avatar asset
5. Inspector → "Animation" tab
6. Check "Import Animation" checkbox
7. Click "Apply"
8. Expand FBX in Project → you should see animation clip(s) inside

───────────────────────────────────────────────────────────────────────────────
PROBLEM: Console shows "Player prefab not assigned"
───────────────────────────────────────────────────────────────────────────────

CAUSE: CinematicController missing prefab reference

FIX:
1. Select CinematicController in Hierarchy
2. Inspector → Player Prefab field
3. Drag Sci_Fi_Character_08_03 prefab from Project
4. Test

════════════════════════════════════════════════════════════════════════════════
                              WHAT EACH PART DOES
════════════════════════════════════════════════════════════════════════════════

Animator Controller:
- Defines how animations transition (Idle ↔ Walk)
- Like a state machine for animations
- Created in STEP 1

Animator Component:
- Plays animations on the character
- Needs a Controller and Avatar to work
- Added to prefab in STEP 2

Avatar:
- Maps animation bones to character skeleton
- Required for Humanoid rigs
- Auto-created when you configure model rig in STEP 3

Animation Clips:
- The actual animation data (walking, idle, etc.)
- Can be from FBX files or standalone .anim files
- Assigned to Animator Controller states

CharacterController:
- Handles physics and collision
- Moves the character based on input
- Not for animation - for movement

SimplifiedSeasonCinematicController:
- Spawns player, sets up camera, handles cinematic flow
- Simple and reliable
- Uses standard Unity Animator workflow

SeasonCinematicController (original):
- More complex, uses PlayableGraph API
- Can play animations directly without Animator Controller
- But STILL needs Animator component on prefab to work!

════════════════════════════════════════════════════════════════════════════════
                                   SUMMARY
════════════════════════════════════════════════════════════════════════════════

T-posing happens when:
❌ No Animator component on character
❌ Animator has no Controller assigned  
❌ Animator has no Avatar assigned
❌ Animator Controller has no animation clips

To fix:
✅ Create Animator Controller with Idle/Walk states
✅ Add Animator component to player prefab
✅ Assign Controller and Avatar to Animator
✅ Assign animation clips to Controller states
✅ Make sure "Apply Root Motion" is UNCHECKED

Once set up properly:
- Player spawns in idle pose (not T-pose)
- WASD moves character with walk animation
- Mouse rotates camera
- Smooth transitions between idle and walk

════════════════════════════════════════════════════════════════════════════════

Still having issues? Check Console for detailed error messages and follow the
specific error troubleshooting above!

════════════════════════════════════════════════════════════════════════════════
